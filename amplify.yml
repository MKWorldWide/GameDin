version: 1
applications:
  - frontend:
      phases:
        preBuild:
          commands:
            - echo "🚀 Starting GameDin build process..."
            - echo "📦 Installing dependencies..."
            - cd frontend
            - npm ci --ignore-scripts
            - echo "✅ Dependencies installed successfully"
        build:
          commands:
            - echo "🔨 Building GameDin application..."
            - npm run lint
            - npm run type-check
            - npm run test:ci
            - npm run build
            - echo "✅ Build completed successfully"
        postBuild:
          commands:
            - echo "📊 Generating build report..."
            - npm run build:analyze
            - echo "🔍 Running security audit..."
            - npm audit --audit-level=moderate
            - echo "✅ Post-build tasks completed"
      artifacts:
        baseDirectory: frontend/dist
        files:
          - '**/*'
        discard-paths: no
      cache:
        paths:
          - frontend/node_modules/**/*
          - frontend/.cache/**/*
    appRoot: .
