version: 1
applications:
  - frontend:
      phases:
        preBuild:
          commands:
            - echo "ğŸš€ Starting GameDin build process..."
            - echo "ğŸ“¦ Installing dependencies..."
            - cd frontend
            - npm ci --ignore-scripts
            - echo "âœ… Dependencies installed successfully"
        build:
          commands:
            - echo "ğŸ”¨ Building GameDin application..."
            - npm run lint
            - npm run type-check
            - npm run test:ci
            - npm run build
            - echo "âœ… Build completed successfully"
        postBuild:
          commands:
            - echo "ğŸ“Š Generating build report..."
            - npm run build:analyze
            - echo "ğŸ” Running security audit..."
            - npm audit --audit-level=moderate
            - echo "âœ… Post-build tasks completed"
      artifacts:
        baseDirectory: frontend/dist
        files:
          - '**/*'
        discard-paths: no
      cache:
        paths:
          - frontend/node_modules/**/*
          - frontend/.cache/**/*
    appRoot: .
